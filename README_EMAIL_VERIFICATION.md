# نظام التحقق من الإيميل - MR HOST

## الوصف

نظام متكامل لإرسال رموز التحقق عبر الإيميل مع دعم إرسال إيميلات حقيقية لحساب `mrhosts7@gmail.com`.

## المميزات الرئيسية

✅ **إرسال إيميل فعلي** للحساب المصرح له
✅ **تصميم إيميل احترافي** باللغة العربية مع HTML
✅ **تحذيرات أمنية** واضحة في الإيميل
✅ **رموز عشوائية** مكونة من 6 أرقام
✅ **انتهاء صلاحية** بعد 10 دقائق
✅ **حماية من الهجمات** (5 محاولات كحد أقصى)
✅ **رسائل خطأ واضحة** ومخصصة
✅ **عد تنازلي** لإعادة الإرسال (60 ثانية)

## كيفية الاستخدام

### 1. إعداد App Password

1. اذهب إلى [Google Account Settings](https://myaccount.google.com/)
2. Security > 2-Step Verification
3. App passwords > Mail > Other
4. اكتب "MR HOST" واحصل على الباسوورد

### 2. تحديث إعدادات الخادم

في الملف `server/routes/email.ts` السطر 9:

```typescript
pass: "your-app-password-here", // ضع الباسوورد المولد هنا
```

### 3. تشغيل النظام

```bash
npm run dev
```

### 4. اختبار النظام

1. اذهب لصفحة إنشاء الحساب: `/signup`
2. املأ البيانات بالإيميل: `mrhosts7@gmail.com`
3. اضغط "إنشاء الحساب"
4. انتظر وصول الإيميل (قد يستغرق 1-2 دقيقة)
5. انسخ الرمز من الإيميل (6 أرقام)
6. أدخل الرمز في صفحة التحقق
7. اضغط "تحقق من الرمز"

## محتوى الإيميل المرسل

سيحتوي الإيميل على:

### العنوان

```
🔐 رمز التحقق: [الرمز] - MR HOST
```

### المحتوى

- **ترحيب** شخصي بالمستخدم
- **تحذيرات أمنية** واضحة
- **الرمز** بخط كبير وواضح
- **تعليمات التحقق** خطوة بخطوة
- **مدة الصلاحية** (10 دقائق)

### التصميم

- تصميم HTML متجاوب
- ألوان احترافية (أزرق وبنفسجي)
- اتجاه RTL للعربية
- رموز تعبيرية مناسبة

## رسائل الخطأ

| الحالة         | الرسالة                                           |
| -------------- | ------------------------------------------------- |
| رمز خطأ        | "الرمز غير صحيح. المحاولات المتبقية: X"           |
| انتهت الصلاحية | "انتهت صلاحية رمز التحقق. يرجى طلب رمز جديد"      |
| كثرة المحاولات | "تجاوزت الحد الأقصى للمحاولات. يرجى طلب رمز جديد" |
| فشل الإرسال    | "فشل في إرسال رمز التحقق. حاول مرة أخرى"          |

## الأمان

### حماية من الهجمات

- **5 محاولات كحد أقصى** لكل رمز
- **انتهاء صلاحية** بعد 10 دقائق
- **تنظيف تلقائي** للرموز المنتهية الصلاحية
- **حماية من إعادة الاستخدام** (كل رمز مرة واحدة)

### التحذيرات الأمني��

- تحذير في الإيميل من مشاركة الرمز
- تحذير أن الشركة لن تطلب الرمز عبر الهاتف
- إرشادات للتجاهل إذا لم يطلب المستخدم الرمز

## الإعدادات القابلة للتخصيص

في الملف `client/config/emailConfig.ts`:

```typescript
export const EMAIL_CONFIG = {
  VERIFIED_EMAIL: "mrhosts7@gmail.com", // الإيميل المصرح له
  CODE_EXPIRY_MINUTES: 10, // مدة انتهاء الصلاحية
  MAX_ATTEMPTS: 5, // الحد الأقصى للمحاولات
  RESEND_COUNTDOWN: 60, // وقت إعادة الإرسال
  // رسائل الخطأ والنجاح...
};
```

## ملفات النظام

```
client/
├── services/
│   └── emailServiceSimple.ts           # خدمة إرسال الإيميل
├── config/
│   └── emailConfig.ts                  # إعدادات النظام
└── pages/
    └── EmailVerification.tsx           # صفحة التحقق

server/
└── routes/
    └── email.ts                        # API إرسال الإيميل
```

## استكشاف الأخطاء

### لا يصل الإيميل؟

1. تحقق من مجلد Spam/Junk
2. تأكد من صحة App Password
3. راجع Console للأخطاء
4. تأكد من تشغيل الخادم

### الرمز لا يعمل؟

1. تأكد من كتابة الرمز صحيحاً
2. تحقق من عدم انتهاء الصلاحية (10 دقائق)
3. لا تستخدم نفس الرمز مرتين

### رسائل خطأ في Console؟

1. تحقق من إعدادات Gmail
2. تأكد من تفعيل 2-Step Verification
3. أعد إنشاء App Password

## للإيميلات الأخرى

إذا استخدمت إيميل غير `mrhosts7@gmail.com`:

- سيظهر الرمز في Console
- ستظهر رسالة Alert (في التطوير)
- لن يتم إرسال إيميل فعلي

## الملاحظات النهائية

⚠️ **احتفظ بـ App Password في مكان آمن**
⚠️ **لا تشارك الرمز مع أي شخص**
⚠️ **الرمز صالح لـ 10 دقائق فقط**
⚠️ **كل رمز يُستخدم مرة واحدة فقط**

---

**تم تطوير النظام خصيصاً لموقع MR HOST** 🚀
